{% assign this_lang = site.pages | where: 'lang', page.lang %}
{% assign pagelist  = this_lang  | where: 'lang_selector', nil %}
<div class="header">
  <div class="container">
  <h1 class="logo"><a href="{{ site.baseurl }}/">{{ site.title }}</a></h1>
  <nav class="nav-collapse">
   <ul class="noList">
     {%  for link in pagelist %}
       {% if link.path contains '.md' and link.path != 'index.md' %}
         {% assign current = nil %}{% if page.url contains link.url %}{% assign current = 'current' %}{% endif %}
           <li class="element {% if forloop.first %}first{% endif %} {{ current }} {% if forloop.last %}last{% endif %}">
             <a href="{{ link.url | prepend: site.baseurl }}">{{ link.title }}</a>
           </li>
       {% endif %}
     {% endfor %}
     {% include lang_selector.html %}
   </ul>
  </nav>
</div>
</div>